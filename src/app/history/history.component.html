<!-- All anomalies that are fixed are shown here -->

<header class="flex items-center w-full sticky-top disable-touch-scroll space-x-4"
    style="background-color: #f0f3f9; width: 100%;">
    <div class="flex items-center max-w-17rem w-25vw relative p-2 h-full"
        style="background-image: linear-gradient(#6586c3c5 0,#6586c3c5 150%), url(../../assets/background-img.png)!important; background-repeat: no-repeat; background-size: cover; width: 25%;">

        <img class="h-14" src="../../assets/codiTrack-logo.png" alt="CodiTrack Logo">
        <h3 class="text-white m-0 ml-2 text-xl px-5">CodiTrack</h3>
    </div>
    <div class="flex md:flex-row items-center flex-grow mx-2" style="width: 75%;">
        <select class="appearance-none bg-white border border-gray-300 py-2 px-4 leading-tight text-sm rounded-md"
            name="country" id="" [(ngModel)]="selectedCountry">
            <option value="all">All</option>
            <option value="Belgium">Belgium</option>
            <option value="Luxembourg">Luxembourg</option>
            <option value="France">France</option>
            <option value="Netherlands">Netherlands</option>
        </select>
    </div>

    <button class="px-3 py-2 bg-[#6684be] text-white rounded-md hover:bg-[#4f74ac] float-right my-auto"
        routerLink="/menu">
        <div class="ml-auto text-xl"><i class="fas fa-backward fa-xl"></i></div>
    </button>
</header>

<div class="container mx-auto">

    <div class="container mx-auto grid grid-cols-12 gap-4">

        <aside class="col-span-3">
            <div class="border border-solid border-gray-300">
                <div class="card-header bg-opacity-3 h-3rem text-sm p-2 mb-0 border-b border-solid border-gray-200"
                    style="background-color: #f0f3f9;">
                    Select railway asset
                </div>
                <div class="p-0  d-flex">
                    <ul class="overflow-auto d-inline-block text-xl">
                        <div *ngFor="let train of trains; let i = index" style="cursor:pointer"
                            class="relative block px-1 py-1 w-full text-dark bg-white border border-gray-300"
                            id="{{ i }}" (click)="onTrainClick(i)"
                            [style.backgroundColor]="selectedTrain === i ? '#4f74ac' : '#FFFFFF'"
                            [style.color]="selectedTrain === i ? '#FFFFFF' : '#000000'">
                            <i class="fas fa-train px-5 font-black"></i> <small> Train {{ i + 1 }}</small>
                        </div>

                    </ul>
                </div>
            </div>
            <br>
            <div class="toggle-bar border border-black border-opacity-25" *ngIf="selectedTrain !== null">
                <div class="card-header bg-opacity-3 h-3rem text-sm p-2 mb-0 border-b border-solid border-gray-200"
                    style="background-color: #f0f3f9;"> Select date </div>
                <div class="p-2">
                    <div class="input-group" id="date-range-picker">
                        <i class="fa fa-calendar p-2  fa-xs "></i>
                        <select
                            class="appearance-none bg-white border border-gray-300 py-2 px-4 leading-tight text-sm rounded-md"
                            id="filter-select" [(ngModel)]="selectedFilter">
                            <option value="" disabled>Select Date</option>
                            <option value="thisWeek">This week</option>
                            <option value="previousWeek">Previous week</option>
                            <option value="customRange">Custom range</option>
                        </select>

                    </div>
                    <hr>
                    <div id="day-list" class="list-group-scroll text-sm">
                        <ng-container
                            *ngFor="let day of selectedFilter === 'thisWeek' ? getCurrentWeek() : selectedFilter === 'previousWeek' ? getPreviousWeek() : []">
                            <div
                                *ngIf="selectedFilter === 'thisWeek' || selectedFilter === 'previousWeek' || selectedFilter === ''">
                                <a id="{{ day }}" style="cursor:pointer"
                                    class="relative block px-2 py-2 w-full text-dark bg-white border border-gray-300"
                                    [style.backgroundColor]="selectedDay === day ? '#4f74ac' : '#FFFFFF'"
                                    [style.color]="selectedDay === day ? '#FFFFFF' : '#000000'"
                                    (click)="selectDay(day)">
                                    <b>{{ day }}</b>
                                </a>
                            </div>
                        </ng-container>


                    </div>
                </div>
            </div>
        </aside>


        <div class="col-span-9">
            <div class="grid grid-cols-6 gap-4">
                <div class="col-span-6">
                    <div *ngFor="let train of trains">
                        <ng-container *ngIf="getAnomaliesByTrainAndCountry(train.id, selectedCountry).length > 0">
                            <app-anomaly-item [train]="train"
                                [anomalies]="getAnomaliesByTrainAndCountry(train.id, selectedCountry)"
                                [tracks]="tracks"></app-anomaly-item>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>

    </div>