<div>
    <header class="flex items-center w-full sticky-top disable-touch-scroll space-x-4"
        style="background-color: #f0f3f9; width: 100%;">
        <div class="flex items-center max-w-17rem w-25vw relative p-2 h-full"
            style="background-image: linear-gradient(#6586c3c5 0,#6586c3c5 150%), url(../../assets/background-img.png)!important; background-repeat: no-repeat; background-size: cover; width: 25%;">
            <img class="h-14" src="../../assets/codiTrack-logo.png" alt="CodiTrack Logo">
            <h3 class="text-white m-0 ml-2 text-xl px-5">CodiTrack</h3>
        </div>
        <div class="col-span-6 bg-gray-100 pl-3 py-3 flex flex-nowrap my-auto">
            <div class="bg-gray-100 bg-opacity-75 w-32 h-12 rounded p-1 my-auto">
                <div class="flex items-center h-full">
                    <select
                        class="appearance-none bg-white border border-gray-300 py-2 px-4 leading-tight text-sm rounded-md"
                        name="country" id="" [(ngModel)]="selectedCountry">
                        <option class="text-base" value="all">All locations</option>
                        <ng-container *ngFor="let country of countries">          
                            <option class="text-base" [value]="country.name">{{country.name}}</option>
                          </ng-container>
                    </select>
                </div>
            </div>
            <div class="bg-gray-100 bg-opacity-75 w-32 h-12 rounded p-1 my-auto">
                <div class="flex items-center h-full">
                    <select
                        class="appearance-none bg-white border border-gray-300 py-2 px-4 leading-tight text-sm rounded-md"
                        name="types" id="" [(ngModel)]="selectedTypes">
                        <option class="text-base" value="all">All types</option>
                        <option class="text-base" value="vegetation">Vegetation</option>
                        <option class="text-base" value="sign">Signs</option>
                    </select>
                </div>
            </div>
            <div class="my-auto absolute right-3 top-3 flex flex-nowrap">
                <div (click)="changeMode()" class="my-auto mx-8">
                    <button class="px-4 py-2  bg-gray-200 text-black text-sm rounded float-left w-1/2">List</button>
                    <button class="px-4 py-2  bg-[#6684be] text-white text-sm rounded float-right w-1/2">Map</button>
                </div>

                <button class="px-3 py-2 bg-[#6684be] text-white rounded-md hover:bg-[#4f74ac] float-right my-auto"
                    routerLink="/menu">
                    <div class="ml-auto text-xl"><i class="fas fa-backward fa-xl"></i></div>
                </button>
            </div>

        </div>
    </header>
    @if (isLoading) {
    <div class="mt-10">
        <app-page-loader></app-page-loader>
    </div>
    }
    <div class="mx-auto" *ngIf="anomalies && anomalies.length > 0">
        <div class="relative overflow-hidden">
            <app-new-map [anomalies]="getAnomaliesByCountry(selectedCountry, selectedTypes)" [height]="'92.5vh'"
                [width]="'100%'" [center]="center" [isDetails]="false" [trainTracks]="tracks" />
            <div class="md:mt-4 absolute bottom-6 left-3 z-10 rounded p-1">
                <img src="../../assets/RoT_icon_blue.png" alt="" class="h-12 w-auto">

            </div>
            <div class="md:mt-4 h-44 bg-gray-100 bg-opacity-75 w-36 absolute bottom-6 right-3 z-10 rounded p-1 border">
                <p class="text-lg mb-2">Types</p>
                <ul class="text-base space-y-2">
                    <li class="flex items-center">
                        <span class="dot bg-[#3274A3] h-4 w-4 rounded-full mr-2"></span>
                        <p>Vegetation</p>
                    </li>
                    <li class="flex items-center">
                        <span class="dot bg-[#6B6B6B] h-4 w-4 rounded-full mr-2"></span>
                        <p>Signs</p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>